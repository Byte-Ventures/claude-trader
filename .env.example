# ==============================================================================
# EXCHANGE CONFIGURATION
# ==============================================================================

# Exchange Selection: "coinbase" or "kraken"
EXCHANGE=coinbase

# Coinbase API Credentials
# Get these from https://portal.cdp.coinbase.com/
COINBASE_API_KEY=organizations/{org_id}/apiKeys/{key_id}
COINBASE_API_SECRET="-----BEGIN EC PRIVATE KEY-----\n...\n-----END EC PRIVATE KEY-----"
# Or use key file instead (recommended):
# COINBASE_KEY_FILE=/path/to/cdp_api_key.json

# Kraken API Credentials
# Get these from https://www.kraken.com/ -> Settings -> Security -> API
# Required permissions: Query Funds, Query Orders, Create Orders, Cancel Orders
KRAKEN_API_KEY=your_kraken_api_key
KRAKEN_API_SECRET=your_base64_encoded_secret

# ==============================================================================
# TRADING MODE
# ==============================================================================

# Trading Mode: "paper" (simulated) or "live" (real money)
TRADING_MODE=paper

# Paper Trading Initial Balances (only used when TRADING_MODE=paper)
# Default gives ~50/50 split at $100k BTC price
PAPER_INITIAL_QUOTE=5000
PAPER_INITIAL_BASE=0.05

# ==============================================================================
# TRADING PARAMETERS
# ==============================================================================

# Trading pair (must be valid on your exchange)
TRADING_PAIR=BTC-USD

# Position size as % of portfolio (conservative: 20-40, moderate: 40-60)
POSITION_SIZE_PERCENT=40

# Seconds between market checks (fallback when adaptive disabled)
CHECK_INTERVAL_SECONDS=60

# Adaptive Interval - adjust check frequency based on market volatility
ADAPTIVE_INTERVAL_ENABLED=true
INTERVAL_LOW_VOLATILITY=120     # 2 min during calm markets
INTERVAL_NORMAL=60              # 1 min during normal conditions
INTERVAL_HIGH_VOLATILITY=30     # 30 sec during volatile periods
INTERVAL_EXTREME_VOLATILITY=15  # 15 sec during extreme moves

# ==============================================================================
# STRATEGY PARAMETERS (Tuning Guide Below)
# ==============================================================================

# RSI - Momentum oscillator (0-100)
RSI_PERIOD=14              # Lookback period (lower = more responsive)
RSI_OVERSOLD=35            # Below this = buy zone (default: 35, aggressive: 40)
RSI_OVERBOUGHT=65          # Above this = sell zone (default: 65, aggressive: 60)

# EMA - Exponential Moving Average crossover
EMA_FAST=9                 # Fast EMA period (shorter = more signals)
EMA_SLOW=21                # Slow EMA period (crossover = trend change)

# MACD - Trend momentum
MACD_FAST=12               # Fast EMA for MACD line
MACD_SLOW=26               # Slow EMA for MACD line
MACD_SIGNAL=9              # Signal line smoothing period

# Bollinger Bands - Volatility and mean reversion
BOLLINGER_PERIOD=20        # SMA lookback period
BOLLINGER_STD=2.0          # Band width in standard deviations (2.0 = 95%)

# ATR - Average True Range for position sizing
ATR_PERIOD=14              # Volatility lookback period

# Signal Threshold - Minimum score to execute trade
# Score range: -100 (strong sell) to +100 (strong buy)
# Threshold: 60 = moderate, 50 = more trades, 70 = fewer trades
SIGNAL_THRESHOLD=60

# ==============================================================================
# RISK MANAGEMENT
# ==============================================================================

# Stop Loss / Take Profit (ATR multiples)
STOP_LOSS_ATR_MULTIPLIER=1.5      # Distance for stop loss (1.5x ATR)
TAKE_PROFIT_ATR_MULTIPLIER=2.0    # Distance for take profit (2x ATR)
TRAILING_STOP_ATR_MULTIPLIER=1.0  # Trailing stop distance (1x ATR)

# Loss Limits - Auto-halt trading on losses
MAX_DAILY_LOSS_PERCENT=10.0       # Stop trading for day after 10% loss
MAX_HOURLY_LOSS_PERCENT=3.0       # Pause 1 hour after 3% loss

# Position Limits
MAX_POSITION_PERCENT=80.0         # Never exceed 80% portfolio in one position

# Circuit Breaker Recovery
# BLACK_RECOVERY_HOURS=24          # Uncomment for auto-recovery (default: manual only)

# ==============================================================================
# TELEGRAM NOTIFICATIONS
# ==============================================================================

# 1. Message @BotFather on Telegram to create a bot and get token
# 2. Message @userinfobot to get your chat_id
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here
TELEGRAM_ENABLED=true

# ==============================================================================
# MULTI-AGENT AI TRADE REVIEW (Optional)
# ==============================================================================

# Uses OpenRouter for multi-model AI access
# Get API key from https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-v1-...
AI_REVIEW_ENABLED=false

# Multi-Agent Review System:
# - 3 reviewer agents with different stances (Pro, Neutral, Opposing)
# - Stances are randomly assigned to models each review
# - 1 judge agent synthesizes all reviews for final decision

# Reviewer models (stances randomly assigned each review)
REVIEWER_MODEL_1=x-ai/grok-4-fast
REVIEWER_MODEL_2=qwen/qwen3-next-80b-a3b-instruct
REVIEWER_MODEL_3=google/gemini-2.5-flash

# Judge model (makes final decision based on all 3 reviews)
JUDGE_MODEL=deepseek/deepseek-chat-v3.1

# Veto Behavior (what happens when judge disapproves a trade)
# skip = Cancel trade entirely
# reduce = Execute with smaller position (POSITION_REDUCTION)
# delay = Wait DELAY_MINUTES before allowing trade
# info = Log warning but proceed anyway (default)
VETO_ACTION=info
VETO_THRESHOLD=0.8         # Judge confidence needed to trigger veto (0.5-1.0)
POSITION_REDUCTION=0.5     # Position multiplier for "reduce" (0.5 = half size)
DELAY_MINUTES=15           # Wait time for "delay" action

# "Interesting hold" analysis - reviews holds close to threshold
INTERESTING_HOLD_MARGIN=15 # Score margin (45-75 with threshold 60)

# Debug mode - reviews ALL decisions, not just trades/interesting holds
AI_REVIEW_ALL=false

# ==============================================================================
# HOURLY MARKET ANALYSIS (Optional)
# ==============================================================================

# AI-powered market analysis with online research
# Uses the same multi-agent system as trade reviews (3 reviewers + judge)
# Triggers:
#   - Hourly during high/extreme volatility
#   - Once when volatility returns to normal (post-volatility summary)
HOURLY_ANALYSIS_ENABLED=true

# Market Research - fetches news and on-chain data from free APIs
# Sources: CryptoCompare (news), Blockchain.info (on-chain), Mempool.space (fees)
MARKET_RESEARCH_ENABLED=true

# AI Web Search - allows AI models to search web during analysis (via DuckDuckGo)
AI_WEB_SEARCH_ENABLED=true

# Cache duration for research data (minutes) - avoids excessive API calls
MARKET_RESEARCH_CACHE_MINUTES=15

# ==============================================================================
# MARKET REGIME ADAPTATION
# ==============================================================================

# Enable dynamic strategy adjustments based on market conditions
REGIME_ADAPTATION_ENABLED=true

# Individual regime components (all enabled by default)
REGIME_SENTIMENT_ENABLED=true   # Use Fear & Greed Index
REGIME_VOLATILITY_ENABLED=true  # Use ATR-based volatility
REGIME_TREND_ENABLED=true       # Use EMA trend direction

# Adjustment intensity (0.0 = disabled, 1.0 = normal, 2.0 = aggressive)
# At 1.0: threshold adjusts ±10-15, position multiplier ±25%
REGIME_ADJUSTMENT_SCALE=1.0

# ==============================================================================
# DATABASE & LOGGING
# ==============================================================================

DATABASE_PATH=data/trading.db
LOG_LEVEL=INFO
LOG_FILE=logs/trading.log
